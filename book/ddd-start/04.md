# Chapter 4. 리포지터리와 모델 구현

## JPA를 이용한 리포지터리 구현

**모듈 위치**

리포지터리 인터페이스는 애그리거트와 같은 도메인 영역에 속하고, 리포지터리를 구현한 클래스는 인프라스트럭처 영역에 속한다.
- 기능하면 리토지터리 구현 클래스를 인프라스트럭처 영역에 위치 시켜서 인프라스트럭처에 대한 의존을 낮추자.

**리포지터리 기본 기능 구현**

리포지터리 인터페이스는 애그리거트 루트를 기준으로 작성하자.

```java
public interface OrderRepository {
    Optional<Order> findById(OrderNo no);
    void save(Order order);
    List<Order> findByOrdererId(String ordererId, int startRow, int size);
}
```

애그리거트 조회는 ID 외에도 JPA Criteria, JPQL을 사용할 수도 있다.

> 사용자가 삭제 기능을 실행할 때 데이터를 바로 삭제하기보다는 삭제 플래그를 사용해서 데이터를 화면에 보여줄지 여부를 결정하는 방식으로 구현하자.
>
> 관리자 기능에서 삭제 데이터 조회를 해야 하거나 데이터 원복을 위해 일정 기간 보관해야 할 경우도 있다.



















# Chapter 5. 스피링 데이터 JPA

# Chapter 6. 응용 서비스와 표현 영역

# Chapter 7. 도메인 서비스

# Chapter 8. 애그러기트 트랜잭션

# Chapter 9. 도메인 모델과 바운디드 컨텍스트

# Chapter 10. 이벤트

# Chapter 11. CQRS