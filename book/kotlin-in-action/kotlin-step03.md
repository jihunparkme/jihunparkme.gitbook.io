# μ½”ν‹€λ¦° Step03 - μ λ„¤λ¦­μ¤, μ• λ…Έν…μ΄μ…, λ¦¬ν”λ ‰μ…

<details>
<summary>π“’Β μ λ„¤λ¦­μ¤ μ”μ•½</summary>

- μ λ„¤λ¦­ ν•¨μμ™€ ν΄λμ¤λ¥Ό μλ°”μ™€ λΉ„μ·ν•κ² μ„ μ–Έ

```kotlin
fun <T> identity(value: T): T {
    return value
}

class Box<T>(val value: T)

@Test
fun `μ λ„¤λ¦­ ν•¨μ`() {
    assertEquals(42, identity(42))
    assertEquals("Hello", identity("Hello"))
}

@Test
fun `μ λ„¤λ¦­ ν΄λμ¤`() {
    val intBox = Box(42)
    val stringBox = Box("Hello")

    assertEquals(42, intBox.value)
    assertEquals("Hello", stringBox.value)
}
```

- μλ°”μ™€ λ§μ°¬κ°€μ§€λ΅ μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμλ” μ»΄νμΌ μ‹μ μ—λ§ μ΅΄μ¬
- νƒ€μ… μΈμκ°€ μ‹¤ν–‰ μ‹μ μ— μ§€μ›μ§€λ―€λ΅ νƒ€μ… μΈμκ°€ μλ” νƒ€μ…(μ λ„¤λ¦­ νƒ€μ…)μ„ is μ—°μ‚°μλ¥Ό μ‚¬μ©ν•΄ κ²€μ‚¬ λ¶κ°€
- μΈλΌμΈ ν•¨μμ νƒ€μ… λ§¤κ°λ³€μλ¥Ό `refied`λ΅ ν‘μ‹ν•΄μ„ μ‹¤μ²΄ν™”ν•λ©΄ μ‹¤ν–‰ μ‹μ μ— κ·Έ νƒ€μ…μ„ isλ΅ κ²€μ‚¬ν•κ±°λ‚ java.lang.Class μΈμ¤ν„΄μ¤λ¥Ό μ–»μ„ μ μλ‹¤.
- λ³€μ„±μ€ κΈ°μ € ν΄λμ¤κ°€ κ°™κ³  νƒ€μ… νλΌλ―Έν„°κ°€ λ‹¤λ¥Έ λ‘ μ λ„¤λ¦­ νƒ€μ… μ‚¬μ΄μ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„κ°€ νƒ€μ… μΈμ μ‚¬μ΄μ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„μ— μν•΄ μ–΄λ–¤ μν–¥μ„ λ°›λ”μ§€λ¥Ό λ…μ‹ν•λ” λ°©λ²•

```kotlin
open class Animal
class Dog : Animal()
class Box<out T>(val value: T)

@Test
fun `λ³€μ„± ν…μ¤νΈ`() {
    val dogBox: Box<Dog> = Box(Dog())
    val animalBox: Box<Animal> = dogBox // out ν‚¤μ›λ“λ΅ μΊμ¤ν… κ°€λ¥

    assertTrue(animalBox is Box<Animal>)
}
```

- μ λ„¤λ¦­ ν΄λμ¤μ νƒ€μ… νλΌλ―Έν„°κ°€ `out` μ„μΉμ—μ„λ§ μ‚¬μ©λλ” κ²½μ°(μƒμ‚°μ) κ·Έ νƒ€μ… νλΌλ―Έν„°λ¥Ό `out`μΌλ΅ ν‘μ‹ν•΄μ„ κ³µλ³€μ μΌλ΅ λ§λ“¤ μ μλ‹¤.
    - μ½”ν‹€λ¦°μ μ½κΈ° μ „μ© List μΈν„°νμ΄μ¤λ” κ³µλ³€μ μ΄λ‹¤.
    - λ”°λΌμ„ List<String>μ€ List<Any)μ ν•μ„ νƒ€μ…μ΄λ‹¤.
- κ³µλ³€μ μΈ κ²½μ°μ™€ λ°λ€λ΅ μ λ„¤λ¦­ ν΄λμ¤μ νƒ€μ… νλΌλ―Έν„°κ°€ `in` μ„μΉμ—μ„λ§ μ‚¬μ©λλ” κ²½μ°(μ†λΉ„μ) κ·Έ νƒ€μ… νλΌλ―Έν„°λ¥Ό `in`μΌλ΅ ν‘μ‹ν•΄μ„ λ°κ³µλ³€μ μΌλ΅ λ§λ“¤ μ μλ‹¤.
- ν•¨μ μΈν„°νμ΄μ¤λ” μ²« λ²μ§Έ νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄μ„λ” λ°κ³µλ³€μ μ΄κ³ , λ‘ λ²μ§Έ νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄μ„λ” κ³µλ³€μ μ΄λ‹¤.
    - κ·Έλμ„ (Animal) β†’ Intλ” (Cat) β†’ Numberμ ν•μ„ νƒ€μ…μ΄λ‹¤.
- μ½”ν‹€λ¦°μ—μ„λ” μ λ„¤λ¦­ ν΄λμ¤μ κ³µλ³€μ„±μ„ μ „μ²΄μ μΌλ΅ μ§€μ •ν•κ±°λ‚(μ„ μ–Έ μ§€μ  λ³€μ„±) κµ¬μ²΄μ μΈ μ‚¬μ© μ„μΉμ—μ„ μ§€μ •ν•  μ μλ‹¤. (μ‚¬μ© μ§€μ  λ³€μ„±)
- μ λ„¤λ¦­ ν΄λμ¤μ νƒ€μ… μΈμκ°€ μ–΄λ–¤ νƒ€μ…μΈμ§€ μ •λ³΄κ°€ μ—†κ±°λ‚ νƒ€μ… μΈμκ°€ μ–΄λ–¤ νƒ€μ…μΈμ§€κ°€ μ¤‘μ”ν•μ§€ μ•μ„ λ• μ¤νƒ€ ν”„λ΅μ μ…(`*`) κµ¬λ¬Έμ„ μ‚¬μ©ν•  μ μλ‹¤.
</details>

<details>
<summary>π“•Β μ• λ…Έν…μ΄μ…κ³Ό λ¦¬ν”λ ‰μ… μ”μ•½</summary>

- μ½”ν‹€λ¦°μ—μ„ μ• λ…Έν…μ΄μ…μ„ μ μ©ν•  λ• μ‚¬μ©ν•λ” λ¬Έλ²•μ€ μλ°”μ™€ κ±°μ λ™μΌ
- μ½”ν‹€λ¦°μ—μ„λ” μλ°”λ³΄λ‹¤ λ” λ„“μ€ λ€μƒμ— μ• λ…Έν…μ΄μ…μ„ μ μ© κ°€λ¥ (ex. νμΌκ³Ό μ‹(expression))
- μ• λ…Έν…μ΄μ… μΈμλ΅ μ›μ‹ νƒ€μ… κ°’, λ¬Έμμ—΄, μ΄λ„, ν΄λμ¤ μ°Έμ΅°, λ‹¤λ¥Έ μ• λ…Έν…μ΄μ… ν΄λμ¤μ μΈμ¤ν„΄μ¤, κ·Έλ¦¬κ³  μ§€κΈκΉμ§€ λ§ν• μ—¬λ¬ μ ν•μ κ°’μΌλ΅ μ΄λ¤„μ§„ λ°°μ—΄μ„ μ‚¬μ© κ°€λ¥
- `@get:Rule`μ„ μ‚¬μ©ν•΄ μ• λ…Έν…μ΄μ…μ μ‚¬μ© λ€μƒμ„ λ…μ‹ν•λ©΄ ν• μ½”ν‹€λ¦° μ„ μ–Έμ΄ μ—¬λ¬ κ°€μ§€ λ°”μ΄νΈ μ½”λ“ μ”μ†λ¥Ό λ§λ“¤μ–΄λ‚΄λ” κ²½μ° μ •ν™•ν μ–΄λ–¤ λ¶€λ¶„μ— μ• λ…Έν…μ΄μ…μ„ μ μ©ν• μ§€ μ§€μ • κ°€λ¥
- μ• λ…Έν…μ΄μ… ν΄λμ¤λ¥Ό μ •μν•  λ•λ” λ³Έλ¬Έμ΄ μ—†κ³  μ£Ό μƒμ„±μμ λ¨λ“  νλΌλ―Έν„°λ¥Ό val ν”„λ΅νΌν‹°λ΅ ν‘μ‹ν• μ½”ν‹€λ¦° ν΄λμ¤λ¥Ό μ‚¬μ©

```kotlin
@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION)
@Retention(AnnotationRetention.RUNTIME)
annotation class MyAnnotation(val name: String, val value: Int)
```

- λ©”νƒ€μ• λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ λ€μƒ, μ• λ…Έν…μ΄μ… μ μ§€ λ°©μ‹ λ“± μ—¬λ¬ μ• λ…Έν…μ΄μ… νΉμ„±μ„ μ§€μ • κ°€λ¥

```kotlin
@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION) // μ• λ…Έν…μ΄μ… μ μ© λ€μƒ
@Retention(AnnotationRetention.RUNTIME) // μ• λ…Έν…μ΄μ… μ μ§€ λ°©μ‹
@MustBeDocumented // λ¬Έμ„ν™” μ—¬λ¶€
annotation class MyAnnotation(val name: String, val value: Int)
```

- λ¦¬ν”λ ‰μ… APIλ¥Ό ν†µν•΄ μ‹¤ν–‰ μ‹μ μ— κ°μ²΄μ λ©”μ†λ“μ™€ ν”„λ΅νΌν‹°λ¥Ό μ—΄κ±°ν•κ³  μ ‘κ·Ό κ°€λ¥
    - λ¦¬ν”λ ‰μ… APIμ—λ” ν΄λμ¤(KClass), ν•¨μ(KFunction) λ“± μ—¬λ¬ μΆ…λ¥μ μ„ μ–Έμ„ ν‘ν„ν•λ” μΈν„°νμ΄μ¤ μ κ³µ
- ν΄λμ¤λ¥Ό μ»΄νμΌ μ‹μ μ— μ•κ³  μλ‹¤λ©΄ `KClass` μΈμ¤ν„΄μ¤λ¥Ό μ–»κΈ° μ„ν•΄ ClassName::classλ¥Ό μ‚¬μ©
    - ν•μ§€λ§ μ‹¤ν–‰ μ‹μ μ— obj λ³€μμ— λ‹΄κΈ΄ κ°μ²΄λ΅λ¶€ν„° KClass μΈμ¤ν„΄μ¤λ¥Ό μ–»κΈ° μ„ν•΄μ„λ” obj.javaClass.kotlinμ„ μ‚¬μ©
- `KFunction`κ³Ό `KProperty` μΈν„°νμ΄μ¤λ” λ¨λ‘ KCallableμ„ ν™•μ¥
    - KClassableμ€ μ λ„¤λ¦­ call λ©”μ†λ“λ¥Ό μ κ³µ
- `KCallable.callBy` λ©”μ†λ“λ¥Ό μ‚¬μ©ν•λ©΄ λ©”μ†λ“λ¥Ό νΈμ¶ν•λ©΄μ„ λ””ν΄νΈ νλΌλ―Έν„°κ°’μ„ μ‚¬μ© κ°€λ¥
- `KFunction0`, `KFunctiuon1` λ“±μ μΈν„°νμ΄μ¤λ” λ¨λ‘ νλΌλ―Έν„° μκ°€ λ‹¤λ¥Έ ν•¨μλ¥Ό ν‘ν„ν•λ©°, invoke λ©”μ†λ“λ¥Ό μ‚¬μ©ν•΄ ν•¨μ νΈμ¶ κ°€λ¥
- `KProperty0`λ” μµμƒμ„ ν”„λ΅νΌν‹°λ‚ λ³€μ, `KProperty1`μ€ μμ‹  κ°μ²΄κ°€ μλ” ν”„λ΅νΌν‹°μ— μ ‘κ·Όν•  λ• μ“°λ” μΈν„°νμ΄μ¤
    - λ‘ μΈνΌν…μ΄μ¤ λ¨λ‘ GET λ©”μ†λ“λ¥Ό μ‚¬μ©ν•΄ ν”„λ΅νΌν‹° κ°’μ„ κ°€μ Έμ¬ μ μμ
    - `KMutableProperty0`κ³Ό `KMutableProperty1`μ€ κ°κ° KProperty0κ³Ό KProperty1μ„ ν™•μ¥ν•λ©°, set λ©”μ†λ“λ¥Ό ν†µν•΄ ν”„λ΅νΌν‹°κ°’μ„ λ³€κ²½ν•  μ μκ² μ§€μ›
</details>

---

