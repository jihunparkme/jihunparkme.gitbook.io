# CHAPTER 2. μ½”λ“ μ„¤κ³„

# 3μ¥. μ¬μ‚¬μ©μ„±

## Item 19. knowledgeλ¥Ό λ°λ³µν•μ—¬ μ‚¬μ©ν•μ§€ λ§λΌ

{% hint style="info" %}

**knowledge**: ν”„λ΅μ νΈ μ§„ν–‰ μ‹ μ •μν• λ¨λ“  κ²ƒ

{% endhint %}

ν”„λ΅κ·Έλ¨μ—μ„ μ¤‘μ”ν• `knowledge` λ‘ κ°λ¥Ό λ½‘λ”λ‹¤λ©΄
- λ΅μ§: ν”„λ΅κ·Έλ¨μ΄ μ–΄λ– ν• μ‹μΌλ΅ λ™μ‘ν•λ”μ§€μ™€ μ–΄λ–»κ² λ³΄μ΄λ”μ§€
- κ³µν†µ μ•κ³ λ¦¬μ¦: μ›ν•λ” λ™μ‘μ„ ν•κΈ° μ„ν• μ•κ³ λ¦¬μ¦

.

π‘‰π» **λ¨λ“  κ²ƒμ€ λ³€ν™”ν•λ‹¤**

- λ³€ν™”λ” μ°λ¦¬κ°€ μμƒν•μ§€ λ»ν• κ³³μ—μ„ μΌμ–΄λ‚λ‹¤.
- μ¤λλ‚  λ€λ¶€λ¶„ ν”„λ΅μ νΈλ” λ‡ λ‹¬λ§λ‹¤ μ”κµ¬ μ‚¬ν•­κ³Ό λ‚΄λ¶€μ μΈ κµ¬μ΅°λ¥Ό κ³„μ†ν•΄μ„ λ³€κ²½ν•λ‹¤.
- λ¨λ“  κ²ƒμ€ λ³€ν™”ν•κ³ , μ°λ¦¬λ” μ΄μ— λ€λΉ„ν•΄μ•Ό ν•λ‹¤.

.

π‘‰π» **λ°λ³µν•΄λ„ λλ” μ½”λ“**

- λ‘ μ½”λ“κ°€ κ°™μ€ `knowledge`λ¥Ό λ‚νƒ€λ‚΄λ”μ§€, λ‹¤λ¥Έ `knowledge`λ¥Ό λ‚νƒ€λ‚΄λ”μ§€λ¥Ό 
- "ν•¨κ» λ³€κ²½λ  κ°€λ¥μ„±μ΄ λ†’μ€κ°€? λ”°λ΅ λ³€κ²½λ  κ°€λ¥μ„±μ΄ λ†’μ€κ°€?"λΌλ” μ§λ¬ΈμΌλ΅ μ–΄λ μ •λ„ κ²°μ • κ°€λ¥

.

π‘‰π» **λ‹¨μΌ μ±…μ„ μ›μΉ™**

{% hint style="info" %}

μ½”λ“λ¥Ό μ¶”μ¶ν•΄λ„ λλ”μ§€λ¥Ό ν™•μΈν•  μ μλ” μ›μΉ™μΌλ΅, SOLID μ›μΉ™ μ¤‘ ν•λ‚

{% endhint %}

λ‹¨μΌ μ±…μ„ μ›μΉ™μ€ μ°λ¦¬μ—κ² λ‘ κ°€μ§€ μ‚¬μ‹¤μ„ μ•λ ¤μ¤€λ‹¤.
- μ„λ΅ λ‹¤λ¥Έ κ³³μ—μ„ μ‚¬μ©ν•λ” knowledgeλ” λ…λ¦½μ μΌλ΅ λ³€κ²½ν•  κ°€λ¥μ„±μ΄ λ†’λ‹¤
  - λ”°λΌμ„, λΉ„μ·ν• μ²λ¦¬λ¥Ό ν•λ”λΌλ„ μ™„μ „ν λ‹¤λ¥Έ knowledgeλ΅ μ·¨κΈ‰ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.
- λ‹¤λ¥Έ knowledgeλ” λ¶„λ¦¬ν•΄ λ‘λ” κ²ƒμ΄ μΆ‹λ‹¤.
  - κ·Έλ ‡μ§€ μ•μΌλ©΄, μ¬μ‚¬μ©ν•΄μ„λ” μ• λλ” λ¶€λ¶„μ„ μ¬μ‚¬μ©ν•λ ¤λ” μ νΉμ΄ λ°μƒν•  μ μλ‹¤.

π“– **μ •λ¦¬**

> λ¨λ“  κ²ƒμ€ λ³€ν™”ν•λ‹¤. 
>
> λ”°λΌμ„ κ³µν†µ knowledgeκ°€ μλ‹¤λ©΄, μ΄λ¥Ό μ¶”μ¶ν•΄μ„ λ³€ν™”μ— λ€λΉ„ν•μ.
>
> μ—¬λ¬ μ”μ†μ— λΉ„μ·ν• λ¶€λ¶„μ΄ μλ” κ²½μ°, λ³€κ²½μ΄ ν•„μ”ν•  λ• μ‹¤μκ°€ λ°μƒν•  μ μλ‹¤. μ΄λ° λ¶€λ¶„μ€ μ¶”μ¶ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.
>
> μ¶”κ°€μ μΌλ΅ μλ„ν•μ§€ μ•μ€ μμ •μ„ ν”Όν•λ ¤λ©΄ λλ” λ‹¤λ¥Έ κ³³μ—μ„ μ΅°μ‘ν•λ” λ¶€λ¶„μ΄ μλ‹¤λ©΄, λ¶„λ¦¬ν•΄μ„ μ‚¬μ©ν•μ.

## Item 20. μΌλ°μ μΈ μ•κ³ λ¦¬μ¦μ„ λ°λ³µν•΄μ„ κµ¬ν„ν•μ§€ λ§λΌ

π‘‰π» **ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬ μ‚΄ν΄λ³΄κΈ°**
- μΌλ°μ μΈ μ•κ³ λ¦¬μ¦μ€ λ€λ¶€λ¶„ μ΄λ―Έ λ‹¤λ¥Έ μ‚¬λλ“¤μ΄ μ •μν•΄ λ†“μ•λ‹¤.

.

π‘‰π» **λ‚λ§μ μ ν‹Έλ¦¬ν‹° κµ¬ν„ν•κΈ°**
- ν™•μ¥ ν•¨μμ μ¥μ 
  - ν•¨μλ” μƒνƒλ¥Ό μ μ§€ν•μ§€ μ•μΌλ―€λ΅ ν–‰μ„λ¥Ό λ‚νƒ€λ‚΄κΈ° μΆ‹λ‹¤(νΉν μ‚¬μ΄λ“ μ΄ν™μ΄ μ—†λ” κ²½μ° λ”μ±)
  - ν†±λ λ²¨ ν•¨μμ™€ λΉ„κµν•΄μ„, ν™•μ¥ ν•¨μλ” κµ¬μ²΄μ μΈ νƒ€μ…μ΄ μλ” κ°μ²΄μ—λ§ μ‚¬μ©μ„ μ ν• κ°€λ¥
  - μμ •ν•  κ°μ²΄λ¥Ό μ•„κ·λ¨ΌνΈλ΅ μ „λ‹¬λ°›μ•„ μ‚¬μ©ν•λ” κ²ƒλ³΄λ‹¤ ν™•μ¥ λ¦¬μ‹λ²„λ΅ μ‚¬μ©ν•λ” κ²ƒμ΄ κ°€λ…μ„± μΈ΅λ©΄μ—μ„ μΆ‹μ
  - ν™•μ¥ ν•¨μλ” κ°μ²΄μ— μ •μν• ν•¨μλ³΄λ‹¤ κ°μ²΄ μ‚¬μ© μ‹, μλ™ μ™„μ„± κΈ°λ¥ λ“±μΌλ΅ μ μ•μ΄ μ΄λ£¨μ–΄μ§€λ―€λ΅ μ‰΅κ² μ°Ύμ„ μ μμ

π“– **μ •λ¦¬**

> μΌλ°μ μΈ μ•κ³ λ¦¬μ¦ λ€λ¶€λ¶„ `stdlib`μ— μ΄λ―Έ μ •μλμ–΄ μμ„ κ°€λ¥μ„±μ΄ λ†’λ‹¤.
>
> λ”°λΌμ„ `stdlib`μ„ κ³µλ¶€ν•΄ λ‘λ©΄ μΆ‹λ‹¤.
>
> stdlibμ— μ—†λ” μΌλ°μ μΈ μ•κ³ λ¦¬μ¦μ΄ ν•„μ”ν•κ±°λ‚, νΉμ • μ•κ³ λ¦¬μ¦μ„ λ°λ³µν•΄μ„ μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ° ν”„λ΅μ νΈ λ‚΄λ¶€μ— μ§μ ‘ μ •μνμ.
>
> μΌλ°μ μΌλ΅ μ΄λ° μ•κ³ λ¦¬μ¦λ“¤μ€ `ν™•μ¥ ν•¨μ`λ΅ μ •μν•μ.

## Item 21. μΌλ°μ μΈ ν”„λ΅νΌν‹° ν¨ν„΄μ€ ν”„λ΅νΌν‹° μ„μ„μΌλ΅ λ§λ“¤μ–΄λΌ

μ½”ν‹€λ¦°μ€ μ½”λ“ μ¬μ‚¬μ©κ³Ό κ΄€λ ¨ν•΄μ„ ν”„λ΅νΌν‹° μ„μ„μ΄λΌλ” μƒλ΅μ΄ κΈ°λ¥μ„ μ κ³µ
- μΌλ°μ μΈ ν”„λ΅νΌν‹°μ ν–‰μ„λ¥Ό μ¶”μ¶ν•΄μ„ μ¬μ‚¬μ© κ°€λ¥

λ€ν‘μ μΈ μλ΅ μ§€μ—° ν”„λ΅νΌν‹°
- μ½”ν‹€λ¦°μ—μ„λ” stdlib `lazy` ν”„λ΅νΌν‹° ν¨ν„΄μΌλ΅ μ‰½κ² κµ¬ν„

```kotlin
val value by lazy { createValue() }
```

.

ν”„λ΅νΌν‹° μ„μ„μ„ μ‚¬μ©ν•λ©΄, μ΄μ™Έμ—λ„ λ³€ν™”κ°€ μμ„ λ• μ΄λ¥Ό κ°μ§€ν•λ” `observable` ν¨ν„΄μ„ μ‰½κ² μƒμ„± κ°€λ¥

```kotlin
var items: List<Item> by
    Delegates.observable(listOf()) { -, -, - ->
        notifyDataSetChanged()
    }
```

.

ν”„λ΅νΌν‹° μ„μ„μ€ λ‹¤λ¥Έ κ°μ²΄μ λ©”μ„λ“λ¥Ό ν™μ©ν•΄μ„ ν”„λ΅νΌν‹°μ μ ‘κ·Όμ(Getter, Setter)λ¥Ό λ§λ“λ” λ°©μ‹
- Getter β” getValue, Setter β” setValue ν•¨μλ¥Ό μ‚¬μ©ν•΄μ„ μƒμ„±

```kotlin
var token: String? by LoggingProperty(null)
var attempt: Int by LoggingProperty(0)

private class LoggingProperty<T>(var value: T) {
    operator fun getValue(
        thisRef: Any?,
        prop: KProperty<*>
    ): T {
        println("${prop.name} returned value $value")
        return value
    }

    operator fun setValue(
        thisRef: Any?,
        prop: KProperty<*>,
        newValue: T
    ) {
        val name = prop.name
        println("$name changed form $value to $newValue")
        value = newValue
    }
}

@Test
fun loggingProperty() {
    token = "abe" // token changed form null to abe
    attempt = 10 // attempt changed form 0 to 10
}
```

.

μ½”ν‹€λ¦° stdlibμ—μ„ μ•μ•„λ‘λ©΄ μΆ‹μ€ ν”„λ΅νΌν‹° λΈλ¦¬κ²μ΄ν„°
- lazy
- Delegates.observable
- Delegates.vetoable
- Delegates.notNull

π“– **μ •λ¦¬**

> ν”„λ΅νΌν‹° μ„μ„μ€ ν”„λ΅νΌν‹° ν¨ν„΄μ„ μ¶”μ¶ν•λ” μΌλ°μ μΈ λ°©λ²•μ΄λΌ λ§μ΄ μ‚¬μ©
>
> μ½”ν‹€λ¦° κ°λ°μλΌλ©΄ ν”„λ΅νΌν‹° μ„μ„μ΄λΌλ” κ°•λ ¥ν• λ„κµ¬μ™€ κ΄€λ ¨λ λ‚΄μ©μ„ μ μ•μ•„μ•Ό ν•¨
>
> μΌλ°μ μΈ ν¨ν„΄μ„ μ¶”μ¶ν•κ±°λ‚ λ” μΆ‹μ€ API μƒμ„±μ— ν™μ© κ°€λ¥

## Item 22. μΌλ°μ μΈ μ•κ³ λ¦¬μ¦μ„ κµ¬ν„ν•  λ• μ λ„¤λ¦­μ„ μ‚¬μ©ν•λΌ

> νƒ€μ… μ•„κ·λ¨ΌνΈ(νƒ€μ… νλΌλ―Έν„°)λ¥Ό μ‚¬μ©ν•λ” ν•¨μλ¥Ό `μ λ„¤λ¦­ ν•¨μ`λΌκ³  λ¶€λ¥Έλ‹¤.

νƒ€μ… νλΌλ―Έν„°λ” μ»΄νμΌλ¬μ— νƒ€μ…κ³Ό κ΄€λ ¨λ μ •λ³΄λ¥Ό μ κ³µν•μ—¬ μ»΄νμΌλ¬κ°€ νƒ€μ…μ„ μ΅°κΈμ΄λΌλ„ λ” μ •ν™•ν•κ² μ¶”μΈ΅ν•  μ μλ„λ΅ μ§€μ›

```kotlin
public inline fun <T> Iterable<T>.filter(
    predicate: (T) -> Boolean
): List<T> {
    return filterTo(ArrayList<T>(), predicate)
}

public inline fun <T, C : MutableCollection<in T>> Iterable<T>.filterTo(
    destination: C, 
    predicate: (T) -> Boolean
): C {
    for (element in this) if (predicate(element)) destination.add(element)
    return destination
}
```

.

π‘‰π» **μ λ„¤λ¦­ μ ν•**

νƒ€μ… νλΌλ―Έν„°μ μ¤‘μ”ν• κΈ°λ¥ μ¤‘ ν•λ‚λ” κµ¬μ²΄μ μΈ νƒ€μ…μ μ„λΈνƒ€μ…λ§ μ‚¬μ©ν•κ² νƒ€μ…μ„ μ ν•ν•λ” κ²ƒ
- νƒ€μ… μ ν•μ΄ κ±Έλ¦¬λ―€λ΅ λ‚΄λ¶€μ—μ„ ν•΄λ‹Ή νƒ€μ…μ΄ μ κ³µν•λ” λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

```kotlin
fun <T : Comparable<T>> Iterable<T>.sorted(): List<T> {
    //
}

fun <T, C : MutableCollection<in T>>
Iterable<T>.toCollection(destination: C): C {
    //
}

class ListAdapter<T: ItemAdapter>( /* ... */ ) {
    //
}
```

λ§μ΄ μ‚¬μ©ν•λ” μ ν•μΌλ΅λ” `Any`κ°€ μλ”λ°, `nullable`μ΄ μ•„λ‹ νƒ€μ…μ„ λ‚νƒ€λ‚Έλ‹¤.

```kotlin
public inline fun <T, R : Any> Iterable<T>.mapNotNull(
    transform: (T) -> R?
): List<R> {
    return mapNotNullTo(ArrayList<R>(), transform)
}
```

π“– **μ •λ¦¬**

> μ½”ν‹€λ¦° μλ£ν• μ‹μ¤ν…μ—μ„ νƒ€μ… νλΌλ―Έν„°λ” κµ‰μ¥ν μ¤‘μ”ν• λ¶€λ¶„
>
> μΌλ°μ μΌλ΅ μ΄λ¥Ό μ‚¬μ©ν•΄μ„ type-safe μ λ„¤λ¦­ μ•κ³ λ¦¬μ¦κ³Ό μ λ„¤λ¦­ κ°μ²΄λ¥Ό κµ¬ν„
>
> νƒ€μ… νλΌλ―Έν„°λ” κµ¬μ²΄ μλ£ν•μ μ„λΈνƒ€μ…μ„ μ ν• κ°€λ¥
>
> μ΄λ ‡κ² ν•λ©΄ νΉμ • μλ£ν•μ΄ μ κ³µν•λ” λ©”μ„λ“λ¥Ό μ•μ „ν•κ² μ‚¬μ© κ°€λ¥

## Item 23. νƒ€μ… νλΌλ―Έν„°μ μ„€λ„μ‰μ„ ν”Όν•λΌ

ν”„λ΅νΌν‹°μ™€ νλΌλ―Έν„°κ°€ κ°™μ€ μ΄λ¦„μ„ κ°€μ§ μ μλ‹¤.
- μ΄λ ‡κ² λλ©΄ μ§€μ—­ νλΌλ―Έν„°κ°€ μ™Έλ¶€ μ¤μ½”ν”„μ— μλ” ν”„λ΅νΌν‹°λ¥Ό κ°€λ¦°λ‹¤.
- μ΄λ¥Ό `μ„€λ„μ‰`μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

```kotlin
class Forest(val name: String) {
    
    fun addTree(name: String) {
        //...
    }
}
```

μ΄ κ²½μ°, addTree ν•¨μκ°€ ν΄λμ¤ νƒ€μ… νλΌλ―Έν„°μΈ Tλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

```kotlin
class Forest(T: Tree) {
    
    fun addTree(tree: T) {
        //...
    }
}

val forest = Forest<Birch>()
forest.addTree(Birch())
forest.addTree(Spruce()) // type mismatch ERROR
```
π“– **μ •λ¦¬**

> νƒ€μ… νλΌλ―Έν„° μ„€λ„μ‰μ΄ λ°μƒν• μ½”λ“λ” μ΄ν•΄ν•κΈ° μ–΄λ ¤μΈ μ μλ‹¤.
>
> νƒ€μ… νλΌλ―Έν„°κ°€ μ„€λ„μ‰λλ” κ²½μ° μ½”λ“λ¥Ό μ£Όμν•΄μ„ μ‚΄ν΄λ³΄μ.

## Item 24. μ λ„¤λ¦­ νƒ€μ…κ³Ό variance ν•μ •μλ¥Ό ν™μ©ν•λΌ

`invariant`λ” μ λ„¤λ¦­ νƒ€μ…μΌλ΅ λ§λ“¤μ–΄μ§€λ” νƒ€μ…λ“¤μ΄ μ„λ΅ κ΄€λ ¨μ„±μ΄ μ—†λ‹¤λ” μλ―Έ
- λ§μΌ μ–΄λ–¤ κ΄€λ ¨μ„±μ„ μ›ν•λ‹¤λ©΄, `out` λλ” `in` μ΄λΌλ” variance ν•μ •μλ¥Ό λ¶™μΈλ‹¤.

`out`μ€ νƒ€μ… νλΌλ―Έν„°λ¥Ό `covariant`(κ³µλ³€μ„±)μΌλ΅ λ§λ“ λ‹¤.
- ex. Aκ°€ Bμ μ„λΈ νƒ€μ…μΌ λ•, Cup\<A\>κ°€ Cup\<B\>μ μ„λΈνƒ€μ…

`in` ν•μ •μλ” νƒ€μ… νλΌλ―Έν„°λ¥Ό `contravariant`(λ°λ³€μ„±)μΌλ΅ λ§λ“ λ‹¤.
- ex. Aκ°€ Bμ μ„λΈ νƒ€μ…μΌ λ•, Cup\<A\>κ°€ Cup\<B\>μ μνΌνƒ€μ…

![Result](https://github.com/jihunparkme/jihunparkme.gitbook.io/blob/main/.gitbook/assets/kotlin/variance.png?raw=trueΒ 'Result')

π“– **μ •λ¦¬**

μ½”ν‹€λ¦°μ€ νƒ€μ… μ•„κ·λ¨ΌνΈμ κ΄€κ³„μ— μ μ•½μ„ κ±Έ μ μλ” κ°•λ ¥ν• μ λ„¤λ¦­ κΈ°λ¥μ„ μ κ³µ

> μ½”ν‹€λ¦°μ—μ„ μ κ³µν•λ” νƒ€μ… ν•μ •μ
>
> - νƒ€μ… νλΌλ―Έν„°μ κΈ°λ³Έμ μΈ `variance` λ™μ‘μ€ `invariant`
>   - λ§μΌ Cup\<T\>λΌλ©΄, νƒ€μ… νλΌλ―Έν„° Tλ” invariant
>   - Aκ°€ Bμ μ„λΈνƒ€μ…μ΄λΌκ³  ν•  λ• Cup\<A\>μ™€ Cup\<B\>λ” μ•„λ¬΄ κ΄€κ³„λ¥Ό κ°–μ§€ μ•μ
> - `out` ν•μ •μλ” νƒ€μ… νλΌλ―Έν„°λ¥Ό `covariant`ν•κ² λ§λ“¦
>   - λ§μΌ Cup\<T\>λΌλ©΄, νƒ€μ… νλΌλ―Έν„° Tλ” covariant
>   - Aκ°€ Bμ μ„λΈνƒ€μ…μ΄λΌκ³  ν•  λ• Cup\<A\>λ” Cup\<B\>μ μ„λΈνƒ€μ…
>   - covariant νƒ€μ…μ€ out μ„μΉμ— μ‚¬μ© κ°€λ¥
> - `in` ν•μ •μλ”  νƒ€μ… νλΌλ―Έν„°λ¥Ό `contravariant`ν•κ² λ§λ“¦
>   - λ§μΌ Cup\<T\>λΌλ©΄, νƒ€μ… νλΌλ―Έν„° Tλ” contravariant
>   - Aκ°€ Bμ μ„λΈνƒ€μ…μ΄λΌκ³  ν•  λ• Cup\<B\>λ” Cup\<A\>μ μνΌνƒ€μ…
>   - contravariant νƒ€μ…μ€ in μ„μΉμ— μ‚¬μ© κ°€λ¥
>
> μ½”ν‹€λ¦°μ—μ„λ”
>
> - List, Set νƒ€μ… νλΌλ―Έν„°λ” `covariant`(out ν•μ •μ)
>   - Map κ°’ νƒ€μ…μ„ λ‚νƒ€λ‚΄λ” νƒ€μ… νλΌλ―Έν„°λ„ covariant(out ν•μ •μ)
>   - λ‹¨, Mutable.. νƒ€μ… νλΌλ―Έν„°λ” `invariant`
> - ν•¨μ νƒ€μ…μ νλΌλ―Έν„° νƒ€μ…μ€ `contravariant`(in ν•μ •μ)
>   - λ¦¬ν„΄ νƒ€μ…μ€ `contravariant`(out ν•μ •μ)
> - λ¦¬ν„΄λ§ λλ” νƒ€μ…μ—λ” `covariant`(out ν•μ •μ) μ‚¬μ©
> - ν—μ©λ§ λλ” νƒ€μ…μ—λ” `contravariant`(in ν•μ •μ) μ‚¬μ©

## Item 25. κ³µν†µ λ¨λ“μ„ μ¶”μ¶ν•΄μ„ μ—¬λ¬ ν”λ«νΌμ—μ„ μ¬μ‚¬μ©ν•λΌ

κ³µν†µ λ¨λ“μ„ μ‚¬μ©ν•λ©΄ μ—¬λ¬ ν”λ«νΌμ—μ„ μ½”λ“λ¥Ό μ¬μ‚¬μ©ν•  μ μλ‹¤.
- λ”°λΌμ„ μ΄λ¬ν• μ ‘κ·Ό λ°©λ²•μ€ μ½”λ“λ¥Ό ν• λ²λ§ μ‘μ„±ν•΄μ„ κ³µν†µ λ…Όλ¦¬ λλ” κ³µν†µ μ•κ³ λ¦¬μ¦μ„ μ¬μ‚¬μ©ν•  μ μκ² ν•΄μ£Όλ” κ°•λ ¥ν• λ„κµ¬

# 4μ¥. μ¶”μƒν™” μ„¤κ³„

> μ»΄ν“¨ν„° κ³Όν•™μ—μ„ μ¶”μƒν™”(abstraction)μ€ λ³µμ΅ν• μλ£, λ¨λ“, μ‹μ¤ν… λ“±μΌλ΅λ¶€ν„° ν•µμ‹¬μ μΈ κ°λ… λλ” κΈ°λ¥μ„ κ°„μ¶”λ ¤ λ‚΄λ” κ²ƒμ„ λ§ν•λ‹¤.

μ¶”μƒν™”λ” λ³µμ΅μ„±μ„ μ¨κΈ°κΈ° μ„ν•΄ μ‚¬μ©λλ” λ‹¨μν• ν•μ‹μ„ μλ―Έ
- λ€ν‘μ μΈ μλ΅ μΈν„°νμ΄μ¤

ν”„λ΅κ·Έλλ°μ—μ„ μ¶”μƒν™”λ¥Ό μ‚¬μ©ν•λ” λ©μ 
- λ³µμ΅μ„±μ„ μ¨κΈ°κΈ° μ„ν•΄
- μ½”λ“λ¥Ό μ²΄κ³„ν™”ν•κΈ° μ„ν•΄
- λ§λ“λ” μ‚¬λμ—κ² λ³€ν™”μ μμ λ¥Ό μ£ΌκΈ° μ„ν•΄

## Item 26. ν•¨μ λ‚΄λ¶€μ μ¶”μƒν™” λ λ²¨μ„ ν†µμΌν•λΌ

κ°„λ‹¨ν• μ¶”μƒν™”λ¥Ό μ¶”μ¶ν•΄μ„ κ°€λ…μ„±μ„ ν–¥μƒ
- ν•¨μλ” κ°„λ‹¨ν•΄μ•Ό ν•λ‹¤.
- ν•¨μλ” μ‘μ•„μ•Ό ν•λ©°, μµμ†ν•μ μ±…μ„λ§μ„ κ°€μ Έμ•Ό ν•λ‹¤.

ν•¨μλ¥Ό μ¶”μ¶ν•λ©΄ μ¬μ‚¬μ©κ³Ό ν…μ¤νΈκ°€ μ‰¬μ›μ§

π“– **μ •λ¦¬**

> ν•¨μ, ν΄λ, λ¨λ“ λ“±μ λ‹¤μ–‘ν• λ°©μ‹μ„ ν†µν•΄ μ¶”μƒν™”λ¥Ό λ¶„λ¦¬
> 
> κ°κ°μ λ μ΄μ–΄κ°€ λ„λ¬΄ μ»¤μ§€λ” κ²ƒμ€ μΆ‹μ§€ μ•λ‹¤.
> 
> μ‘κ³  μµμ†ν•μ μ±…μ„λ§ κ°–λ” ν•¨μκ°€ μ΄ν•΄ν•κΈ° μ‰½λ‹¤.

## Item 27. λ³€ν™”λ΅λ¶€ν„° μ½”λ“λ¥Ό λ³΄νΈν•λ ¤λ©΄ μ¶”μƒν™”λ¥Ό μ‚¬μ©ν•λΌ

μƒμλ΅ μ¶”μ¶ν•  λ•μ μ¥μ 
- μ΄λ¦„μ„ λ¶™μΌ μ μκ³ ,
- λ‚μ¤‘μ— ν•΄λ‹Ή κ°’μ„ μ‰½κ² λ³€κ²½ κ°€λ¥

.

π‘‰π» **ν•¨μ**

λ§μ΄ μ‚¬μ©λλ” μ•κ³ λ¦¬μ¦μ€ κ°„λ‹¨ν• ν™•μ¥ ν•¨μλ΅ μ‚¬μ© κ°€λ¥

```kotlin
fun Context.toast(
    message: String,
    duration: Int = Toast.LENGTH_LONG
) {
    Toast.makeText(this, message, duration).show()
}
```

λ©”μ‹μ§€λ¥Ό μ¶λ ¥ν•λ” λ” μ¶”μƒμ μΈ λ°©λ²•

```kotlin
fun Context.showMessage(
    message: String,
    duration: MessageLength = MessageLength.LONG
) {
    val toastDuration = when(duraion) {
        SHORT -> Length.LENGTH_SHORT
        LONG -> Length.LENGTH_LONG
    }
    Toask.makeText(this, message, toastDuration).show()
}

enum class MessageLength { SHORT, LONG }
```

.

π‘‰π» **ν΄λμ¤**

κµ¬ν„μ„ μ¶”μƒν™”ν•  μ μλ” λ” κ±λ ¥ν• λ°©λ²•μ€ ν΄λμ¤
- ν΄λμ¤κ°€ ν•¨μλ³΄λ‹¤ λ” κ°•λ ¥ν• μ΄μ λ” `μƒνƒ`λ¥Ό κ°€μ§ μ μμΌλ©°, `λ§μ€ ν•¨μ`λ¥Ό κ°€μ§ μ μλ‹¤λ” μ  λ•λ¬Έ

ν΄λμ¤ μƒμ„±μ„ μ„μ„ν•  μ μμ

```kotlin
@Inject lateinit var messageDisplay: messageDisplay
```

mock κ°μ²΄λ¥Ό ν™μ©ν•΄μ„ ν•΄λ‹Ή ν΄λμ¤μ— μμ΅΄ν•λ” λ‹¤λ¥Έ ν΄λμ¤μ κΈ°λ¥μ„ νƒμ¤νΈ κ°€λ¥

```kotlin
val messageDisplay: MessageDisplay = mockk()
```

λ©”μ‹μ§€λ¥Ό μ¶λ ¥ν•λ” λ” λ‹¤μ–‘ν• μΆ…λ¥μ λ©”μ„λ“λ¥Ό λ§λ“¤ μ μμ

```kotlin
messageDisplay.setChristmasMode(true)
```

.

π‘‰π» **μΈν„°νμ΄μ¤**

κ±°μ λ¨λ“  κ²ƒμ΄ μΈν„°νμ΄μ¤λ΅ ν‘ν„
- `listOf` ν•¨μλ” `List`λ¥Ό λ¦¬ν„΄
- μ»¬λ ‰μ… μ²λ¦¬ ν•¨μλ” `Iterable` λλ” `Collection` ν™•μ¥ ν•¨μλ΅μ„ `List`, `Map` λ“±μ„ λ¦¬ν„΄
- ν”„λ΅νΌν‹° μ„μ„μ€ `ReadOnlyProperty` λλ” `ReadWriteProperty` λ’¤μ— μ¨κ²¨μ§

μΈν„°νμ΄μ¤ λ’¤μ— κ°μ²΄λ¥Ό μ¨κΉ€μΌλ΅μ¨ μ‹¤μ§μ μΈ κµ¬ν„μ„ μ¶”μƒν™”ν•κ³ , μ‚¬μ©μκ°€ μ¶”μƒν™”λ κ²ƒμ—λ§ μμ΅΄ν•κ² λ§λ“¤ μ μμ
- μ¦‰, κ²°ν•©(coupling)μ„ μ¤„μΌ μ μμ

μΈν„°νμ΄μ¤ λ„μ…

```kotlin
interface MessageDisplay {
    fun show(
        message: String,
        duraion: MessageLength = LONG
    )
}

class ToastDisplay(val context: Context): MessageDisplay {
    override fun show(
        message: String,
        duraion: MessageLength
    ) {
        val toastDuration = when(duraion) {
            SHORT -> Length.SHORT
            LONG -> Length.LONG
        }
        Toast.makeText(context, message, toastDuration).show()
    }
}

enum class MessageLength { SHORT, LONG }
```

ν…μ¤νΈν•  λ• μΈν„°νμ΄μ¤ νμ΄ν‚Ήμ΄ ν΄λμ¤ λ¨ν‚Ήλ³΄λ‹¤ κ°„λ‹¨ν•λ―€λ΅, λ³„λ„μ λ¨ν‚Ή λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ§€ μ•μ•„λ„ λλ‹¤.
- μ„ μ–Έκ³Ό μ‚¬μ©μ΄ λ¶„λ¦¬λμ–΄ μμΌλ―€λ΅, μ‹¤μ  ν΄λμ¤λ¥Ό μμ λ΅­κ² λ³€κ²½ κ°€λ¥

.

π‘‰π» **ID λ§λ“¤κΈ°(nextId)**

ID νƒ€μ…μ„ μ‰½κ² λ³€κ²½ν•  μ μκ² ν΄λμ¤λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μ

```kotlin
data class Id(private val id: Int)

private var nextId: Int = 0
fun getNextId(): Id = Id(next++)
```

λ” λ§μ€ μ¶”μƒν™”λ” λ” λ§μ€ μμ λ¥Ό μ£Όμ§€λ§, μ΄λ¥Ό μ •μν•κ³ , μ‚¬μ©ν•κ³ , μ΄ν•΄ν•λ” κ²ƒμ€ μ–΄λ ¤μ›μ΅λ‹¤.

.

π‘‰π» **μ¶”μƒν™”κ°€ μ£Όλ” μμ **

μ¶”μƒν™”λ¥Ό ν•λ” λ‡ κ°€μ§€ λ°©λ²•
- μƒμλ΅ μ¶”μ¶
- λ™μ‘μ„ ν•¨μλ΅ λν•‘
- ν•¨μλ¥Ό ν΄λμ¤λ΅ λν•‘
- μΈν„°νμ΄μ¤ λ’¤μ— ν΄λμ¤ μ¨κΈ°κΈ°
- λ³΄νΈμ μΈ κ°μ²΄(universal object)λ¥Ό νΉμν• κ°μ²΄(specialistic object)λ΅ λν•‘

κµ¬ν„ μ‹ ν™μ©κ°€λ¥ν• μ—¬λ¬ λ„κµ¬
- μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„° μ‚¬μ©
- λ‚΄λ¶€ ν΄λμ¤λ¥Ό μ¶”μ¶
- μƒμ„±μ„ μ ν•(ex. ν©ν† λ¦¬ ν•¨μλ΅λ§ κ°μ²΄λ¥Ό μƒμ„±ν•  μ μκ² λ§λ“¤κΈ°)

.

π‘‰π» **μ¶”μƒν™”μ λ¬Έμ **

μ¶”μƒν™”μ—λ” λ‹¨μ λ„ μ΅΄μ¬
- μ¶”μƒν™”λ” μμ λ¥Ό μ£Όμ§€λ§, μ½”λ“λ¥Ό μ΄ν•΄ν•κ³  μμ •ν•κΈ° μ–΄λ µκ² λ§λ“ λ‹¤.

μ–΄λ–¤ λ°©μ‹μΌλ΅ μ¶”μƒν™”λ¥Ό ν•λ ¤λ©΄ μ½”λ“λ¥Ό μ½λ” μ‚¬λμ΄ ν•΄λ‹Ή κ°λ…μ„ λ°°μ°κ³ , μ μ΄ν•΄ν•΄μ•Ό ν•λ‹¤.
- λ‹¤λ¥Έ λ°©μ‹μΌλ΅ μ¶”μƒν™”λ¥Ό ν•λ ¤λ©΄ λ ν•΄λ‹Ή κ°λ…μ„ λ°°μ°κ³ , μ μ΄ν•΄ν•΄μ•Ό ν•λ‹¤.

μ¶”μƒν™”λ” λ§μ€ κ²ƒμ„ μ¨κΈΈ μ μλ” ν…ν¬λ‹‰
- μƒκ°ν•  κ²ƒμ„ μ–΄λ μ •λ„ μ¨κ²¨μ•Ό κ°λ°μ΄ μ‰¬μ›μ§€λ” κ²ƒλ„ μ‚¬μ‹¤μ΄μ§€λ§, λ„λ¬΄ λ§μ€ κ²ƒμ„ μ¨κΈ°λ©΄ κ²°κ³Όλ¥Ό μ΄ν•΄ν•λ” μμ²΄κ°€ μ–΄λ ¤μ›μ§

μ¶”μƒν™”λ¥Ό μ‚¬μ©ν•  μ μλ” κ·μΉ™
- λ§μ€ κ°λ°μκ°€ μ°Έμ—¬ν•λ” ν”„λ΅μ νΈλ” μ΄ν›„ κ°μ²΄ μƒμ„±κ³Ό μ‚¬μ© λ°©λ²•μ„ λ³€κ²½ν•κΈ° μ–΄λ ¤μ›€
  - λ”°λΌμ„ μ¶”μƒν™” λ°©λ²•μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹κ³ , μµλ€ν• λ¨λ“κ³Ό λ¶€λ¶„μ„ λ¶„λ¦¬ν•μ
- μμ΅΄μ„± μ£Όμ… ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•λ©΄ μƒμ„±μ΄ μ–Όλ§λ‚ λ³µμ΅ν•μ‹λ” μ‹ κ²½ μ“°κΈ° μ•μ•„λ„ λ¨
- ν…μ¤νΈλ¥Ό ν•κ±°λ‚ λ‹¤λ¥Έ μ• ν”λ¦¬μΌ€μ΄μ…μ„ κΈ°λ°μΌλ΅ μƒλ΅μ΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ§λ“ λ‹¤λ©΄ μ¶”μƒν™”λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μ
- ν”„λ΅μ νΈκ°€ μ‘κ³  μ‹¤ν—μ μ΄λΌλ©΄, μ¶”μƒν™”λ¥Ό ν•μ§€ μ•κ³ λ„ μ§μ ‘ λ³€κ²½ν•΄λ„ κ΄μ°®μ

π“– **μ •λ¦¬**

> μ¶”μƒν™”λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ€ κµ‰μ¥ν μ–΄λ µμ§€λ§ μ΄λ¥Ό λ°°μ°κ³  μ΄ν•΄ν•΄μ•Ό ν•λ‹¤.
>
> λ‹¤λ§ μ¶”μƒμ μΈ κµ¬μ΅°λ¥Ό μ‚¬μ©ν•λ©΄ κ²°κ³Όλ¥Ό μ΄ν•΄ν•κΈ° μ–΄λ µλ‹¤.
>
> μ¶”μƒν™”λ¥Ό μ‚¬μ©ν•  λ•μ μ¥μ κ³Ό λ‹¨μ μ„ λ¨λ‘ μ΄ν•΄ν•κ³ , ν”„λ΅μ νΈ λ‚΄μ—μ„ κ·Έ κ· ν„μ„ μ°Ύμ•„μ•Ό ν•λ‹¤.
>
> μ¶”μƒν™”κ°€ λ„λ¬΄ λ§κ±°λ‚ λ„λ¬΄ μ μ€ μƒν™© λ¨λ‘ μΆ‹μ€ μƒν™©μ€ μ•„λ‹λ‹¤.

## Item 28. API μ•μ •μ„±μ„ ν™•μΈν•λΌ

`Experimental` λ©”νƒ€ μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄μ„ μ‚¬μ©μλ“¤μ—κ² μ•„μ§ ν•΄λ‹Ή μ”μ†κ°€ μ•μ •μ μ΄μ§€ μ•λ‹¤λ” κ²ƒμ„ μ•λ ¤ μ£Όλ” κ²ƒμ΄ μΆ‹λ‹¤.

```kotlin
@Experimental(level = Experimental.Level.WARNING)
annotation class ExperimentalNewApi

@ExperimentalNewApi
suspend fun getUsers(): List<User> {
    //...
}
```

APIμ μΌλ¶€λ¥Ό λ³€κ²½ν•΄μ•Ό ν•λ‹¤λ©΄, μ „ν™ν•λ” λ° μ‹κ°„μ„ λ‘κ³  `Deprecated` μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•΄μ„ μ‚¬μ©μμ—κ² λ―Έλ¦¬ μ•λ ¤ μ¤μ•Ό ν•λ‹¤.

```kotlin
@Deprecated("Use suspending getUsers instead")
fun getUsers(callback: (List<User>)->Unit) {
    //...
}
```

μ§μ ‘μ μΈ λ€μ•μ΄ μλ‹¤λ©΄, IDEκ°€ μλ™ μ „ν™μ„ ν•  μ μκ² `ReplaceWith`λ¥Ό λ¶™μ—¬ μ£Όλ” κ²ƒλ„ μΆ‹λ‹¤.

```kotlin
@Deprecated("Use suspending getUsers instead", ReplaceWith("getUsers()"))
fun getUsers(callback: (List<User>)->Unit) {
    //...
}
```

π“– **μ •λ¦¬**

> λ¨λ“κ³Ό λΌμ΄λΈλ¬λ¦¬λ¥Ό λ§λ“λ” μ‚¬λκ³Ό μ΄λ¥Ό μ‚¬μ©ν•λ” μ‚¬λλ“¤ μ‚¬μ΄μ— μ»¤λ®¤λ‹μΌ€μ΄μ…μ΄ μ¤‘μ”
>
> μ»¤λ®¤λ‹μΌ€μ΄μ…μ€ λ²„μ „ μ΄λ¦„, λ¬Έμ„, μ–΄λ…Έν…μ΄μ… λ“±μ„ ν†µν•΄ ν™•μΈ κ°€λ¥
>
> λν•, μ•μ •μ μΈ APIμ— λ³€κ²½μ„ κ°€ν•  λ•λ” μ‚¬μ©μκ°€ μ μ‘ν•  μ¶©λ¶„ν• μ‹κ°„μ΄ ν•„μ”

## Item 29. μ™Έλ¶€ APIλ¥Ό wrapν•΄μ„ μ‚¬μ©ν•λΌ

μ μ¬μ μΌλ΅ λ¶μ•μ •ν•λ‹¤κ³  νλλλ” μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬ APIλ¥Ό Wrapν•΄μ„ μ‚¬μ©ν•μ.

μ¥μ  (μμ μ™€ μ•μ •μ„±μ„ μ–»μ„ μ μμ)
- λ¬Έμ κ°€ μλ‹¤λ©΄ λνΌλ§ λ³€κ²½ν•λ©΄ λλ―€λ΅, API λ³€κ²½μ— μ‰½κ² λ€μ‘
- ν”„λ΅μ νΈμ μ¤νƒ€μΌμ— λ§μ¶° API ν•νƒ μ΅°μ • κ°€λ¥
- νΉμ • λΌμ΄λΈλ¬λ¦¬μ—μ„ λ¬Έμ  λ°μƒμ•  μ‹, λνΌλ¥Ό μμ •ν•΄μ„ λ‹¤λ¥Έ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•λ„λ΅ μ½”λ“λ¥Ό μ‰½κ² λ³€κ²½ κ°€λ¥μ„±
- ν•„μ” μ‹ μ‰½κ² λ™μ‘μ„ μ¶”κ°€ν•κ±°λ‚ μμ • κ°€λ¥

λ‹¨μ 
- λνΌλ¥Ό λ”°λ΅ μ •μ
- λ‹¤λ¥Έ κ°λ°μκ°€ ν”„λ΅μ νΈλ¥Ό λ‹¤λ£° λ•, μ–΄λ–¤ λνΌλ“¤μ΄ μλ”μ§€ λ”°λ΅ ν™•μΈ ν•„μ”
- λνΌλ“¤μ€ ν”„λ΅μ νΈ λ‚΄λ¶€μ—μ„λ§ μ ν¨ν•λ―€λ΅, λ¬Έμ κ°€ μƒκ²¨λ„ μ§λ¬Έ λ¶κ°€

λΌμ΄λΈλ¬λ¦¬κ°€ μ–Όλ§λ‚ μ•μ •μ μΈμ§€ ν™•μΈν•  μ μλ” κ°€μ¥ κΈ°λ³Έμ μΈ ν΄λ¦¬μ¤ν‹±μ€ λ²„μ „ λ²νΈμ™€ μ‚¬μ©μ μ

## Item 30. μ”μ†μ κ°€μ‹μ„±μ„ μµμ†ν™”ν•λΌ

μ‘μ€ μΈν„°νμ΄μ¤λ” λ°°μ°κΈ° μ‰½κ³  μ μ§€ν•κΈ° μ‰½λ‹¤
- κΈ°λ¥μ΄ λ§μ€ ν΄λμ¤λ³΄λ‹¤ μ μ€ ν΄λμ¤λ¥Ό μ΄ν•΄ν•λ” κ²ƒμ΄ μ‰¬μ›€
- μ μ§€λ³΄μμ™€ ν…μ¤νΈκ°€ μ‰½κ³  μ μ–΄μ§

μ„Έν„°λ§ privateμΌλ΅ λ§λ“λ” μ½”λ“λ” κµ‰μ¥ν λ§μ΄ μ‚¬μ©
- μΌλ°μ μΌλ΅ μ½”ν‹€λ¦°μ—μ„λ” κµ¬μ²΄ μ ‘κ·Όμμ κ°€μ‹μ„±μ„ μ ν•ν•΄μ„ λ¨λ“  ν”„λ΅νΌν‹°λ¥Ό μΊ΅μν™”ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

```kotlin
// ...
var elementsAdded: Int = 0
    private set
```

κ°€μ‹μ„±μ΄ μ ν•λ μλ΅ ν΄λμ¤μ λ³€κ²½μ„ μ‰½κ² μ¶”μ²™ κ°€λ¥ν•λ©°, ν”„λ΅νΌν‹°μ μƒνƒλ¥Ό λ” μ‰½κ² μ΄ν•΄ κ°€λ¥
- λ³‘λ ¬ ν”„λ΅κ·Έλλ° μ‹ μ•μ „

.

π‘‰π» **κ°€μ‹μ„± ν•μ •μ μ‚¬μ©ν•κΈ°**

ν΄λμ¤ λ©¤λ²„μ κ²½μ° 4κ°μ κ°€μ‹μ„± ν•μ •μ μ‚¬μ© κ°€λ¥
- public: μ–΄λ””μ„λ‚ λ³Ό μ μμ(default)
- private: ν΄λμ¤ λ‚΄λ¶€μ—μ„λ§ λ³Ό μ μμ
- protected: ν΄λμ¤μ™€ μ„λΈν΄λμ¤ λ‚΄λ¶€μ—μ„λ§ λ³Ό μ μμ
- internal: λ¨λ“ λ‚΄λ¶€μ—μ„λ§ λ³Ό μ μμ

ν†±λ λ²¨ μ”μ†μ—λ” μ„Έ κ°€μ§€ κ°€μ‹μ„± ν•μ •μ μ‚¬μ© κ°€λ¥
- public: μ–΄λ””μ„λ‚ λ³Ό μ μμ(default)
- private: ν΄λμ¤ λ‚΄λ¶€μ—μ„λ§ λ³Ό μ μμ
- protected: ν΄λμ¤μ™€ μ„λΈν΄λμ¤ λ‚΄λ¶€μ—μ„λ§ λ³Ό μ μμ

μ½”ν‹€λ¦°μ—μ„ `λ¨λ“`μ΄λ€ ν•¨κ» μ»΄νμΌλλ” μ½”ν‹€λ¦° μ†μ¤λ¥Ό μλ―Έ
- Gradle μ†μ¤ μ„ΈνΈ
- Maven ν”„λ΅μ νΈ
- IntellijJ IDEA λ¨λ“
- Ant νƒμ¤ν¬ ν• λ²μΌλ΅ μ»΄νμΌλλ” νμΌ μ„ΈνΈ

π“– **μ •λ¦¬**

> μ”μ†μ κ°€μ‹μ„±μ€ μµλ€ν• μ ν•μ μΈ κ²ƒμ΄ μΆ‹λ‹¤.
>
> λ³΄μ΄λ” μ”μ†λ“¤μ€ λ¨λ‘ public APIλ΅μ„ μ‚¬μ©λλ©°, μ•„λ μ΄μ λ΅ μµλ€ν• λ‹¨μν• κ²ƒμ΄ μΆ‹λ‹¤.
>
> - μΈν„°νμ΄μ¤κ°€ μ‘μ„μλ΅ μ΄λ¥Ό κ³µλ·°ν•κ³  μ μ§€ν•λ” κ²ƒμ΄ μ‰¬μ›€
> - μµλ€ν• μ ν•μ΄ λμ–΄ μμ–΄μ•Ό λ³€κ²½μ΄ μ‰¬μ›€
> - ν΄λμ¤μ μƒνƒλ¥Ό λ‚νƒ€λ‚΄λ” ν”„λ΅νΌν‹°κ°€ λ…Έμ¶λμ–΄ μλ‹¤λ©΄, ν΄λμ¤κ°€ μμ‹ μ μƒνƒλ¥Ό μ±…μ„μ§ μ μ—†μ
> - κ°€μ‹μ„±μ΄ μ ν•λλ©΄ APIμ λ³€κ²½μ„ μ‰½κ² μ¶”μ  κ°€λ¥

## Item 31. λ¬Έμ„λ΅ κ·μ•½μ„ μ •μν•λΌ

ν•¨μκ°€ λ¬΄μ—‡μ„ ν•λ”μ§€ λ…ν™•ν•κ² μ„¤λ…ν•κ³  μ‹¶λ‹¤λ©΄, KDoc μ£Όμ„μ„ λ¶™μ΄μ

.

π‘‰π» **κ·μ•½**
- μ–΄λ–¤ ν–‰μ„λ¥Ό μ„¤λ…ν•λ©΄ μ‚¬μ©μλ” μ΄λ¥Ό μΌμΆ…μ μ•½μ†μΌλ΅ μ·¨κΈ‰ν•λ©°, μ΄λ¥Ό κΈ°λ°μΌλ΅ μ¤μ¤λ΅ μμ λ΅­κ² μƒκ°ν•λ μμΈ΅μ„ μ΅°μ •
- μ΄μ²λΌ μμΈ΅λλ” ν–‰μ„λ¥Ό μ”μ†μ κ·μ•½(contract of an element)μ΄λΌκ³  ν•¨
- κ·μ•½μ„ μ •μν•λ” κ²ƒμ€ μ–‘μ½ λ¨λ‘μ—κ² μΆ‹μ€ μΌ

κ·μ•½μ„ μ„¤μ •ν•μ§€ μ•λ”λ‹¤λ©΄
- ν΄λμ¤λ¥Ό μ‚¬μ©ν•λ” μ‚¬λμ€ μ¤μ¤λ΅ ν•  μ μλ” κ²ƒκ³Ό ν•  μ μ—†λ” κ²ƒμ„ λ¨λ¥΄λ―€λ΅, κµ¬ν„μ μ„Έλ¶€μ μΈ μ •λ³΄μ— μμ΅΄
- ν΄λμ¤λ¥Ό λ§λ“  μ‚¬λμ€ μ‚¬μ©μκ°€ λ¬΄μ—‡μ„ ν• μ§€ μ• μ μ—†μΌλ―€λ΅ μ‚¬μ©μμ κµ¬ν„μ„ λ§μΉ  μ„ν—μ΄ μμ

.

π‘‰π» **κ·μ•½ μ •μν•κΈ°**

κ·μ•½ μ •μν•κΈ°
- μ΄λ¦„
- μ£Όμ„κ³Ό λ¬Έμ„
- νƒ€μ…

.

π‘‰π» **μ£Όμ„μ„ μ¨μ•Ό ν• κΉ?**
- μ£Όμ„μ„ ν•¨κ» μ‚¬μ©ν•λ©΄ μ”μ†(ν•¨μ λλ” ν΄λμ¤)μ— λ” λ§μ€ λ‚΄μ©μ κ·μ•½μ„ μ„¤λ… κ°€λ¥
- ν•¨μ μ΄λ¦„κ³Ό νλΌλ―Έν„°λ§μΌλ΅ μ •ν™•ν•κ² ν‘ν„λλ” μ”μ†μ—λ” λ”°λ΅ μ£Όμ„μ„ λ„£μ§€ μ•λ” κ²ƒμ΄ μΆ‹μ
- κ·μ•½μ΄ μ μ •λ¦¬λ ν•¨μ
  
  ```kotlin
  /**
   * Returns a new read-only list of given elements.  
   * The returned list is serializable (JVM).
   * @sample samples.collections.Collections.Lists.readOnlyList
   */
   public fun <T> listOf(vararg elements: T): List<T> = if (elements.size > 0) elements.asList() else emptyList()
  ```

.

π‘‰π» **KDoc ν•μ‹**

KDoc μ£Όμ„μ κµ¬μ΅°
- μ²« λ²μ§Έ λ¶€λ¶„μ€ μ”μ†μ— λ€ν• μ”μ•½ μ„¤λ…
- λ‘ λ²μ§Έ λ¶€λ¶„μ€ μƒμ„Έ μ„¤λ…
- μ΄μ–΄μ§€λ” μ¤„μ€ λ¨λ‘ νƒκ·Έλ΅ μ‹μ‘(μ¶”κ°€ μ„¤λ… μ©λ„)

[KDoc syntaxο»Ώ Block tags](https://kotlinlang.org/docs/kotlin-doc.html#block-tags)

κ³µμ‹μ μΈ μ½”ν‹€λ¦° λ¬Έμ„ μƒμ„± λ„κµ¬ μ΄λ¦„μ€ `Dokka`
- [GitHub](https://github.com/Kotlin/dokka)
- [Doc.](https://kotlin.github.io/dokka/1.6.10/)

π“– **μ •λ¦¬**

> μ™Έλ¶€ API κµ¬ν„ μ‹ κ·μ•½μ„ μ μ •μν•μ.
>
> μ΄λ¬ν• κ·μ•½μ€ μ΄λ¦„, λ¬Έμ„, μ£Όμ„, νƒ€μ…μ„ ν†µν•΄ κµ¬ν„ κ°€λ¥
>
> κ·μ•½μ€ μ‚¬μ©μκ°€ κ°μ²΄λ¥Ό μ‚¬μ©ν•λ” λ°©λ²•μ„ μ‰½κ² μ΄ν•΄ν•λ” λ“± μ”μ†λ¥Ό μ‰½κ² μμΈ΅ κ°€λ¥
>
> κ·μ•½μ€ μ”μ†κ°€ ν„μ¬ μ–΄λ–»κ² λ™μ‘ν•κ³ , μ•μΌλ΅ μ–΄λ–»κ² λ™μ‘ν• μ§€λ¥Ό μ‚¬μ©μμ—κ² μ „λ‹¬λ°›μ•„ μ΄λ¥Ό κΈ°λ°μΌλ΅ μ‚¬μ©μλ” μ”μ†λ¥Ό ν™•μ‹¤ν•κ² μ‚¬μ©ν•  μ μκ³ , κ·μ•½μ— μ—†λ” λ¶€λ¶„μ„ λ³€κ²½ν•  μ μλ” μμ λ¥Ό μ–»μ

## Item 32. μ¶”μƒν™” κ·μ•½μ„ μ§€μΌλΌ

π“– **μ •λ¦¬**

> ν”„λ΅κ·Έλ¨μ„ μ•μ •μ μΌλ΅ μ μ§€ν•κ³  μ‹¶λ‹¤λ©΄ κ·μ•½μ„ μ§€ν‚¤μ
>
> κ·μ•½μ„ κΉ° μ λ°–μ— μ—†λ‹¤λ©΄ μ΄λ¥Ό μ λ¬Έμ„ν™”ν•μ.

# 5μ¥. κ°μ²΄ μƒμ„±

## Item 33. μƒμ„±μ λ€μ‹  ν©ν† λ¦¬ ν•¨μλ¥Ό μ‚¬μ©ν•λΌ

μƒμ„±μμ μ—­ν• μ„ λ€μ‹  ν•΄μ£Όλ” ν•¨μλ¥Ό **ν©ν† λ¦¬ ν•¨μ**λΌκ³  λ¶€λ¥Έλ‹¤.

μƒμ„±μ λ€μ‹  ν©ν† λ¦¬ ν•¨μ μ‚¬μ© μ‹ μ¥μ 
- ν•¨μμ— μ΄λ¦„μ„ λ¶™μΌ μ μλ‹¤.
- ν•¨μκ°€ μ›ν•λ” ν•νƒμ νƒ€μ…μ„ λ¦¬ν„΄ν•  μ μλ‹¤.
- νΈμ¶λ  λ•λ§λ‹¤ μƒ κ°μ²΄λ¥Ό λ§λ“¤ ν•„μ”κ°€ μ—†λ‹¤.
- μ•„μ§ μ΅΄μ¬ν•μ§€ μ•μ€ κ°μ²΄λ¥Ό λ¦¬ν„΄ν•  μ μλ‹¤.
- κ°μ²΄ μ™Έλ¶€μ— ν©ν† λ¦¬ ν•¨μλ¥Ό λ§λ“¤λ©΄, κ·Έ κ°€μ‹μ„±μ„ μ›ν•λ” λ€λ΅ μ μ–΄ν•  μ μλ‹¤.
- μΈλΌμΈμΌλ΅ λ§λ“¤ μ μμΌλ©°, κ·Έ νλΌλ―Έν„°λ“¤μ„ reifiedλ΅ λ§λ“¤ μ μλ‹¤.
- μƒμ„±μλ΅ λ§λ“¤κΈ° λ³µμ΅ν• κ°μ²΄λ„ λ§λ“¤ μ μλ‹¤.
- μ›ν•λ” λ•μ— μƒμ„±μλ¥Ό νΈμ¶ν•  μ μλ‹¤.

ν©ν† λ¦¬ ν•¨μλ” κµ‰μ¥ν κ°•λ ¥ν• κ°μ²΄ μƒμ„± λ°©λ²•

ν©ν† λ¦¬ ν•¨μμ μΆ…λ¥
- `companion` κ°μ²΄ ν©ν† λ¦¬ ν•¨μ
- ν™•μ¥ ν©ν† λ¦¬ ν•¨μ
- ν†±λ λ²¨ ν©ν† λ¦¬ ν•¨μ
- κ°€μ§ μƒμ„±μ
- ν©ν† λ¦¬ ν΄λμ¤μ λ©”μ„λ“

.

π‘‰π» **Companion κ°μ²΄ ν©ν† λ¦¬ ν•¨μ**

- ν©ν† λ¦¬ ν•¨μλ¥Ό μ •μν•λ” κ°€μ¥ μΌλ°μ μΈ λ°©λ²•
  - μ½”ν‹€λ¦°μ—μ„ μ΄λ¬ν• μ ‘κ·Ό λ°©λ²•μ„ μΈν„°νμ΄μ¤μ—λ„ κµ¬ν„ κ°€λ¥

  ```kotlin
  class MyLinkedList<T>(
    val head: T,
    val tail: MyLinkedList<T>?
  ) {
    companion object {
        fun <T> of(vararg elements: T): MyLinkedList<T>? {
            /* ... */
        }
    }
  }

  // μ‚¬μ©
  val list = MyLinkedList.of(1, 2)
  ```

ν©ν† λ¦¬ ν•¨μμ— μμ£Ό μ‚¬μ©λλ” μ΄λ¦„λ“¤
- `from`: νλΌλ―Έν„°λ¥Ό ν•λ‚ λ°›κ³ , κ°™μ€ νƒ€μ…μ μΈμ¤ν„΄μ¤ ν•λ‚λ¥Ό λ¦¬ν„΄
- `of`: νλΌλ―Έν„° μ—¬λ¬κ°λ¥Ό λ°›κ³ , μ΄λ¥Ό ν†µν•©ν•΄ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±
- `valueOf`: from, ofμ™€ λΉ„μ·ν• κΈ°λ¥μ„ ν•λ©΄μ„λ„, μλ―Έλ¥Ό μ΅°κΈ λ” μ‰½κ² μ½μ„ μ μλ” ν•¨μ
- `instance` or `getInstance`: μ‹±κΈ€ν„΄μΌλ΅ μΈμ¤ν„΄μ¤ ν•λ‚λ¥Ό λ¦¬ν„΄
- `createInstance` or `newInstance`: getInstanceμ²λΌ λ™μ‘ν•μ§€λ§, μ‹±κΈ€ν„΄μ΄ μ μ©λμ§€ μ•μ•„ ν•¨μ νΈμ¶λ§λ‹¤ μƒλ΅μ΄ μΈμ¤ν„΄μ¤ μƒμ„±
- `getType`: getInstanceμ²λΌ λ™μ‘ν•μ§€λ§, ν©ν† λ¦¬ ν•¨μκ°€ λ‹¤λ¥Έ ν΄λμ¤μ— μμ„ λ• μ‚¬μ©
- `newType`: newInstanceμ²λΌ λ™μ‘ν•μ§€λ§, ν©ν† λ¦¬ ν•¨μκ°€ λ‹¤λ¥Έ ν΄λμ¤μ— μμ„ λ• μ‚¬μ©

companion κ°μ²΄λ” μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μμΌλ©°, ν΄λμ¤λ¥Ό μƒμ†λ°›μ„ μλ„ μλ‹¤.
- companion κ°μ²΄λ¥Ό λ§λ“λ” ν©ν† λ¦¬ ν•¨μ

```kotlin
abstract class ActivityFactory {
    abstract fun getIntent(context: Context): Intent

    fun start(context: Context) {
        val intent = getIntent(context)
        context.startActivity(intent)
    }

    fun startForResult(activity: Activity, requestCode: Int) {
        val intent = getIntent(activity)
        activity.startActivityForResult(intent, requestCode)
    }
}

class MainActivity: AppCompatActivity() {
    //...

    companion object: ActivityFactory() {
        override fun getIntent(context: Context): Intent = 
            Intent(context, MainActivity::class.java)
    }
}

// Use
val intent = MainActivity.getIntent(context)
MainActivity.start(context)
MainActivity.startForResult(activity, requestCode)
```

μ¶”μƒ companion κ°μ²΄ ν©ν† λ¦¬λ” κ°’μ„ κ°€μ§ μ μμ–΄μ„, μΊμ‹±μ„ κµ¬ν„ν•κ±°λ‚ ν…μ¤νΈλ¥Ό μ„ν• κ°€μ§ κ°μ²΄ μƒμ„± κ°€λ¥

.

π‘‰π» **ν™•μ¥ ν©ν† λ¦¬ ν•¨μ**

- μ΄λ―Έ companion κ°μ²΄κ°€ μ΅΄μ¬ν•  λ•, μ΄ κ°μ²΄μ ν•¨μμ²λΌ μ‚¬μ©ν•  μ μλ” ν©ν† λ¦¬ ν•¨μλ¥Ό λ§λ“¤μ–΄μ•Ό ν•  λ•κ°€ μλ‹¤.

```kotlin
interface Tool {
    companion object { /* ... */ }
}
```

- companion κ°μ²΄λ¥Ό ν™μ©ν•΄μ„ ν™•μ¥ ν•¨μλ¥Ό μ •μ κ°€λ¥

```kotlin
fun Tool.Companion.createBigTool( /*...*/ ): BigTool {
    //...
}

Tool.createBigTool()
```

μ΄λ¬ν• μ½”νΈλ¥Ό ν™μ©ν•λ©΄ ν©ν† λ¦¬ λ©”μ„λ“λ¥Ό λ§λ“¤μ–΄μ„ μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬λ¥Ό ν™•μ¥ κ°€λ¥
- λ‹¤λ§ companion κ°μ²΄λ¥Ό ν™•μ¥ν•λ ¤λ©΄ (μ μ–΄λ„ λΉ„μ–΄μλ”) companion κ°μ²΄κ°€ ν•„μ”

.

π‘‰π» **ν†±λ λ²¨ ν©ν† λ¦¬ ν•¨μ**

- λ€ν‘μ μΈ μλ΅ listOf, setOf, mapOf

```kotlin
public fun <T> listOf(
    vararg elements: T
): List<T> = if (elements.size > 0) elements.asList() else emptyList()
```

.

π‘‰π» **κ°€μ§ μƒμ„±μ**

μ½”ν‹€λ¦°μ μƒμ„±μλ” ν†±λ λ²¨ ν•¨μμ™€ κ°™μ€ ν•νƒλ΅ μ‚¬μ©
- λ”°λΌμ„ ν†±λ λ²¨ ν•¨μμ²λΌ μ°Έμ΅°

```kotlin
class A
val a = A()

val reference: ()->A = ::A
```

Listλ¥Ό μƒμ„±μμ²λΌ μ‚¬μ©ν•λ” μ½”λ“
- ν†±λ λ²¨ ν•¨μλ” μƒμ„±μμ²λΌ λ³΄μ΄κ³ , μƒμ„±μμ²λΌ μ‘λ™
- ν•μ§€λ§, ν©ν† λ¦¬ ν•¨μμ™€ κ°™μ€ λ¨λ“  μ¥μ μ„ κ°€μ§
- μ΄κ²ƒμ„ `κ°€μ§ μƒμ„±μ`(**fake constructor**)λΌκ³  λ¶€λ¦„

```kotlin
List(4) { "User$it" }

public inline fun <T> List(
    size: Int, 
    init: (index: Int) -> T)
: List<T> = MutableList(size, init)

public inline fun <T> MutableList(
    size: Int, 
    init: (index: Int) -> T
): MutableList<T> {
    val list = ArrayList<T>(size)
    repeat(size) { index -> list.add(init(index)) }
    return list
}
```

μ§„μ§ μƒμ„±μ λ€μ‹  κ°€μ§ μƒμ„±μλ¥Ό λ§λ“λ” μ΄μ 
- μΈν„°νμ΄μ¤λ¥Ό μ„ν• μƒμ„±μλ¥Ό λ§λ“¤κ³  μ‹¶μ„ λ•
- reified νƒ€μ… μ•„κ·λ¨ΌνΈλ¥Ό κ°–κ² ν•κ³  μ‹¶μ„ λ•

μ΄λ¥Ό μ μ™Έν•λ©΄, κ°€μ§ μƒμ„±μλ” μ§„μ§ μƒμ„±μμ²λΌ λ™μ‘ν•΄μ•Ό ν•λ‹¤
- μƒμ„±μμ²λΌ λ³΄μ—¬μ•Ό ν•λ©° μƒμ„±μμ™€ κ°™μ€ λ™μ‘μ„ ν•΄μ•Ό ν•¨
- μΊμ‹±, nullable λ¦¬ν„΄, μ„λΈ ν΄λμ¤ λ¦¬ν„΄ λ“±μ κΈ°λ¥κΉμ§€ ν¬ν•¨ν•΄μ„ κ°μ²΄λ¥Ό λ§λ“¤κ³  μ‹¶λ‹¤λ©΄, companion κ°μ²΄ ν©ν† λ¦¬ λ©”μ„λ“μ²λΌ λ‹¤λ¥Έ μ΄λ¦„μ„ κ°€μ§„ ν©ν† λ¦¬ ν•¨μλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ„ κ¶μ¥
- κΈ°λ³Έ μƒμ„±μλ¥Ό λ§λ“¤ μ μ—†λ” μƒν™© λλ” μƒμ„±μκ°€ μ κ³µν•μ§€ μ•λ” κΈ°λ¥μΌλ΅ μƒμ„±μλ¥Ό λ§λ“¤μ–΄μ•Ό ν•λ” μƒν™©μ—λ§ κ°€μ§ μƒμ„±μλ¥Ό μ‚¬μ©ν•μ






289