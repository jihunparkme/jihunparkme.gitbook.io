---
description: 대규모 시스템 설계 기초 14장을 요약한 내용입니다.
---

2020년에 조사된 놀라운 통계 자료를 먼저 살펴보자.

- 월간 능동 사용자 수: 2십 억 (2billion)
- 매일 재생되는 비디오 수: 5십 억 (5billion)
- 미국 성인 가운데 73%가 유튜브 이용
- 5천만 명의 창작자
- 유튜브의 광고 수입은 2018 -> 2019 150억 달러로 36% 증가
- 모바일 인터넷 트래픽 가운데 37%를 유튜브가 점유
- 80개의 언어로 이용 가능

**Reference**

- [YouTube by the Numbers](https://www.omnicoreagency.com/youtube-statistics/)
- [YouTube Demographics](https://blog.hubspot.com/marketing/youtube-demographics)

# 1단계: 문제 이해 및 설계 범위 확정

유튜브는 비디오 재생 말고도 댓글, 공유, 좋아요, 재생목록, 구독 등 많은 기능을 제공하므로 적절한 설계 범위 측정이 필요하다.

- 중요 기능은 비디오 업로드, 시청 기능
- 모바일 앱, 웹 브라우저, 스마트 TV 지원
- 일간 능동 상요자 수는 5백만(5million)
- 사용자의 평균 소비 시간은 30분
- 다국어 지원
- 현존하는 비디오 종류와 해상도 대부분을 지원
- 암호화 지원
- 비디오 크기는 최대 1GB로 제한
- 클라우드 서비스 활용

아래 기능을 갖춘 설계에 초점

- 빠른 비디오 업로드
- 원활한 비디오 재생
- 재생 품질 선택 가능
- 낮은 인프라 비용
- 높은 가용성과 규모 확장성, 안정성
- 모바일 앱, 웹 브라우저, 스마트 TV 지원

**개략적 규모 측정**

- 일간 능동 사용자(DAU, Daily Activie User) 수는 5백만(5million)
- 한 사용자는 하루에 평균 5개의 비디오 시청
- 10% 사용자가 하루에 1비디오 업로드
- 비디오 평균 크기는 300MB
- 비디오 저장을 위해 매일 새로 요구되는 저장용량 = 5백만 x 10% x 300MB = 150TB
- CDN 비용(아마존 사용시) = 5백만 x 5비디오 x 0.3GB x $0.02 = $150,000

CDN을 통해 비디오를 서비스하면 비용이 엄청나므로 비용 절감 대안이 필요하다.

# 2단계: 개략적 설계안

개략적으로 설계할 시스템은 세 개 컴포넌트로 구성된다.

**단말(client)**
- 컴퓨터, 모바일, 스마트 TV를 통해 유튜브를 시청할 수 있다.
  
**CDN**
- 비디오는 CDN에 저장
- 재생 버튼을 누르면 CDN으로부터 스트리밍

**API 서버**
- 비디오 스트리밍을 제외한 모든 요청은 API 서버가 처리
- 피드 추천, 비디오 업로드 URL 생성, 메타데이터 DB, 캐시 갱신, 사용자 가입 등

## 비디오 업로드 절차

## 비디오 스트리밍 절차

# 3단계: 상세 설계

## 비디오 트랜스코딩

## 유향 비순환 그래프(DAG) 모델

## 비디오 트랜스코딩 아키텍처

## 시스템 최적화

# 4단계: 마무리